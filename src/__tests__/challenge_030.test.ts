import type * as Challenge030 from "../challenges/challenge_030";

const { ErrorEnum, solution } = jest.requireActual<typeof Challenge030>(
  "../challenges/challenge_030.ts"
);

const successCases = [
  {
    id: 0,
    input: {
      W: 7,
      H: 7,
      diagram: [
        "A  B  C",
        "|  |  |",
        "|--|  |",
        "|  |--|",
        "|  |--|",
        "|  |  |",
        "1  2  3",
      ],
    },
    output: ["A2", "B1", "C3"],
  },
  {
    id: 1,
    input: {
      W: 13,
      H: 8,
      diagram: [
        "A  B  C  D  E",
        "|  |  |  |  |",
        "|  |--|  |  |",
        "|--|  |  |  |",
        "|  |  |--|  |",
        "|  |--|  |--|",
        "|  |  |  |  |",
        "1  2  3  4  5",
      ],
    },
    output: ["A3", "B5", "C1", "D2", "E4"],
  },
  {
    id: 2,
    input: {
      W: 16,
      H: 14,
      diagram: [
        "F  E  D  C  B  A",
        "|  |--|  |  |  |",
        "|--|  |--|  |--|",
        "|  |--|  |--|  |",
        "|  |  |  |  |--|",
        "|  |--|  |--|  |",
        "|  |  |--|  |  |",
        "|  |  |--|  |--|",
        "|--|  |  |--|  |",
        "|  |  |--|  |  |",
        "|--|  |  |  |--|",
        "|  |--|  |  |  |",
        "|  |  |--|  |  |",
        "0  1  2  3  4  5",
      ],
    },
    output: ["F3", "E1", "D0", "C2", "B5", "A4"],
  },
  {
    id: 3,
    input: {
      W: 22,
      H: 18,
      diagram: [
        "P  Q  R  S  T  U  V  W",
        "|  |  |  |  |--|  |  |",
        "|  |  |--|  |  |  |--|",
        "|  |--|  |--|  |  |  |",
        "|--|  |--|  |  |  |--|",
        "|--|  |  |  |  |--|  |",
        "|  |--|  |  |--|  |--|",
        "|  |  |  |--|  |--|  |",
        "|--|  |  |  |--|  |  |",
        "|  |  |--|  |  |  |  |",
        "|  |  |  |--|  |  |--|",
        "|  |  |  |  |--|  |  |",
        "|--|  |  |  |  |  |  |",
        "|--|  |--|  |  |  |--|",
        "|  |--|  |  |--|  |  |",
        "|  |  |--|  |  |  |--|",
        "|--|  |--|  |  |--|  |",
        "1  2  3  4  5  6  7  8",
      ],
    },
    output: ["P3", "Q7", "R8", "S5", "T6", "U2", "V4", "W1"],
  },
  {
    id: 4,
    input: {
      W: 28,
      H: 20,
      diagram: [
        "A  B  C  D  E  F  G  H  I  J",
        "|--|  |--|  |--|  |--|  |--|",
        "|  |--|  |--|  |--|  |--|  |",
        "|--|  |--|  |--|  |--|  |--|",
        "|--|  |--|  |--|  |--|  |--|",
        "|  |--|  |--|  |--|  |--|  |",
        "|  |--|  |--|  |--|  |--|  |",
        "|--|  |--|  |--|  |--|  |--|",
        "|--|  |--|  |--|  |--|  |--|",
        "|  |--|  |--|  |--|  |--|  |",
        "|--|  |--|  |--|  |--|  |--|",
        "|  |--|  |--|  |--|  |--|  |",
        "|--|  |--|  |--|  |--|  |--|",
        "|--|  |--|  |--|  |--|  |--|",
        "|--|  |--|  |--|  |--|  |--|",
        "|  |--|  |--|  |--|  |--|  |",
        "|--|  |--|  |--|  |--|  |--|",
        "|--|  |--|  |--|  |--|  |--|",
        "|  |--|  |--|  |--|  |--|  |",
        "0  1  2  3  4  5  6  7  8  9",
      ],
    },
    output: ["A1", "B3", "C0", "D5", "E2", "F7", "G4", "H9", "I6", "J8"],
  },
  {
    id: 5,
    input: {
      W: 76,
      H: 23,
      diagram: [
        // prettier-ignore
        "~  !  @  #  $  %  ^  &  *  (  )  +  `  1  2  3  4  5  6  7  8  9  0  =  \\  /",
        "|  |--|  |  |--|  |  |--|  |--|  |  |--|  |  |  |--|  |--|  |  |--|  |  |--|",
        "|--|  |--|  |  |  |--|  |--|  |--|  |  |  |--|  |  |--|  |--|  |  |  |--|  |",
        "|  |--|  |--|  |  |  |  |  |--|  |--|  |  |  |  |--|  |--|  |--|  |--|  |--|",
        "|--|  |--|  |  |  |--|  |--|  |--|  |  |  |--|  |--|  |--|  |  |  |--|  |--|",
        "|--|  |  |  |  |--|  |  |--|  |  |  |  |--|  |--|  |--|  |--|  |--|  |--|  |",
        "|  |--|  |  |--|  |--|  |  |--|  |  |--|  |--|  |  |  |--|  |  |--|  |--|  |",
        "|  |  |  |--|  |--|  |--|  |  |  |--|  |--|  |  |--|  |--|  |--|  |--|  |--|",
        "|--|  |  |  |--|  |--|  |--|  |  |  |--|  |--|  |--|  |  |--|  |  |--|  |--|",
        "|  |  |--|  |  |  |  |--|  |  |--|  |  |  |  |  |  |--|  |  |  |--|  |--|  |",
        "|  |  |  |--|  |  |--|  |  |  |  |--|  |  |--|  |--|  |--|  |--|  |--|  |--|",
        "|  |--|  |--|  |  |  |  |  |--|  |--|  |  |  |  |--|  |--|  |--|  |--|  |--|",
        "|--|  |--|  |  |  |--|  |--|  |--|  |  |  |--|  |--|  |--|  |  |  |--|  |--|",
        "|--|  |  |  |  |--|  |  |--|  |  |  |  |--|  |--|  |--|  |--|  |--|  |--|  |",
        "|--|  |--|  |  |  |--|  |--|  |--|  |  |  |--|  |  |--|  |  |  |--|  |  |--|",
        "|  |--|  |  |--|  |--|  |  |--|  |  |--|  |--|  |  |  |--|  |  |--|  |--|  |",
        "|  |--|  |  |--|  |  |  |  |--|  |  |--|  |  |--|  |--|  |--|  |--|  |--|  |",
        "|--|  |  |--|  |  |  |  |--|  |  |--|  |--|  |  |--|  |--|  |--|  |--|  |--|",
        "|--|  |--|  |  |  |--|  |--|  |--|  |  |  |--|  |  |--|  |  |  |--|  |  |--|",
        "|  |--|  |  |--|  |  |--|  |--|  |  |  |--|  |--|  |  |--|  |--|  |--|  |--|",
        "|  |  |  |--|  |  |--|  |  |  |  |--|  |  |--|  |  |--|  |--|  |--|  |--|  |",
        "|--|  |--|  |--|  |--|  |--|  |--|  |--|  |--|  |--|  |--|  |  |  |  |  |--|",
        "a  A  b  B  c  C  d  D  e  E  f  F  g  G  h  H  i  I  j  J  k  K  l  L  m  M",
      ],
    },
    output: [
      "~E",
      "!F",
      "@C",
      "#c",
      "$G",
      "%B",
      "^A",
      "&h",
      "*a",
      "(g",
      ")b",
      "+f",
      "`I",
      "1d",
      "2D",
      "3i",
      "4J",
      "5e",
      "6M",
      "7k",
      "8L",
      "9l",
      "0H",
      "=K",
      "\\j",
      "/m",
    ],
  },
];

const failureCases = [
  {
    id: 0,
    input: {
      W: 3,
      H: 7,
      diagram: [
        "A  B  C",
        "|  |  |",
        "|--|  |",
        "|  |--|",
        "|  |--|",
        "|  |  |",
        "1  2  3",
      ],
    },
    error: ErrorEnum.OUT_OF_RANGE_W,
  },
  {
    id: 1,
    input: {
      W: 7,
      H: 3,
      diagram: [
        "A  B  C",
        "|  |  |",
        "|--|  |",
        "|  |--|",
        "|  |--|",
        "|  |  |",
        "1  2  3",
      ],
    },
    error: ErrorEnum.OUT_OF_RANGE_H,
  },
  {
    id: 2,
    input: {
      W: 7,
      H: 7,
      diagram: [
        "A  B  C",
        "|  |  |",
        "|--|  |",
        "|  |--|",
        "|  |--|",
        "1  2  3",
      ],
    },
    error: ErrorEnum.INVALID_DIAGRAM,
  },
  {
    id: 3,
    input: {
      W: 7,
      H: 7,
      diagram: [
        "A  B  C",
        "| |  |",
        "|-|  |",
        "| |--|",
        "| |--|",
        "| |  |",
        "1 2  3",
      ],
    },
    error: ErrorEnum.INVALID_DIAGRAM,
  },
];

describe("test challenge 030", () => {
  it.each(successCases)("success case $id", ({ input, output }) => {
    const { W, H, diagram } = input;

    expect(solution(W, H, diagram)).toEqual(output);
  });

  it.each(failureCases)("failure case $id", ({ input, error }) => {
    const { W, H, diagram } = input;

    expect(() => solution(W, H, diagram)).toThrow(error);
  });
});
