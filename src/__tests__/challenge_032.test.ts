import type * as Challenge032 from "../challenges/challenge_032";

const { ErrorEnum, solution } = jest.requireActual<typeof Challenge032>(
  "../challenges/challenge_032.ts"
);

const successCases = [
  {
    id: 0,
    input: {
      n: 5,
      associations: ["1 97", "001 98", "000 114", "011 99", "010 100"],
      s: "10010001011101010010001",
    },
    output: "abracadabra",
  },
  {
    id: 1,
    input: {
      n: 9,
      associations: [
        "011 32",
        "0011 33",
        "0010 114",
        "0001 100",
        "0000 101",
        "111 87",
        "110 72",
        "10 108",
        "010 111",
      ],
      s: "1100000101001001111101000101000010110011",
    },
    output: "Hello World !",
  },
  {
    id: 2,
    input: {
      n: 18,
      associations: [
        "11 32",
        "1001 97",
        "000011 98",
        "000010 99",
        "0011 100",
        "011 101",
        "000001 102",
        "00101 104",
        "000000 73",
        "00100 105",
        "10111 108",
        "1000 110",
        "00011 111",
        "10110 114",
        "010 116",
        "10101 118",
        "00010 120",
        "10100 58",
      ],
      s: "0000001000101011001101110010000111110100110110001001010110100111000011001000101110010101101000101011110111000001111000110000011101000101011110111000000010000110011011001111010011000100101",
    },
    output: "DECODE FAIL AT INDEX 186",
  },
  {
    id: 3,
    input: {
      n: 14,
      associations: [
        "101 32",
        "0000 97",
        "0111 99",
        "01001 100",
        "11 101",
        "0110 105",
        "0101 108",
        "00111 109",
        "00110 110",
        "00101 112",
        "100 114",
        "00100 116",
        "00011 118",
        "00010 58",
      ],
      s: "0100000110000110000010101100100111101000101010101111010010110011001110110111001010111000010000000111001001110011",
    },
    output: "DECODE FAIL AT INDEX 0",
  },
  {
    id: 4,
    input: {
      n: 12,
      associations: [
        "0101 32",
        "1 48",
        "00 49",
        "011000 50",
        "011100 51",
        "01111 52",
        "011101 53",
        "0110011 54",
        "011011 55",
        "0110010 56",
        "011010 57",
        "0100 10",
      ],
      s: "01100001111010011101010111000110000100000000110001010111000111000100001001101010110100110110100000000111010101101001101001000011100010100110100000010101001000100100000011010100101100001000000000000010100101111010000111101010110110111000100110000000101001011101010000100100000101001011011010011000010101001011001001000000000010101011110111101000011000101000010100001000001010111101100110100100001010100000001000010010010101000001100001001001000101000001111010011001000101000001110101001001101010000011001101001000000100010101100100111010100100000000010100000110110100000000100010100000110100100110011010100011000000100001111001100000000111000010010010011001111000000100001001100111100110000111001001001100100001110011111000000111111100111000011000000001111001000000100100110011100111100110000000000110000001100100000000001111000000100000011100001110000111100111001000010011000000111100000011001110011111111100001110000000010010000000011111100111000011000000000010000111100000010000110010000001110000110010010011100000000001100001001110011000011100001110011111100110000000000000011001000000111111000000110010011100110010000111110010000001000000100001001110010000111000000000011111100100100001100100100100110011001000000100000010000",
    },
    output: `24
000 32
111001 33
10100 97
111000 99
10001 100
110 101
011100 102
11111 104
10000 73
00111 105
101011 107
00110 108
11110 44
1001 110
1011 46
0110 111
101010 112
0101 114
00101 115
0100 116
011101 85
01111 117
11101 119
00100 121
1000010011110001101010100100001110110100100001001100010101001011000100000111000000010001100111100001011101010010001000010011111001110010111110000111011100011000110000100010110100111000011100100010000000001100011110101111000000100011001111101100001110110010111000110010101000111110011010001001100011000100000010011111110010111000000111001010001001011000001011101110110100010110001111100000010101100101010100100101110111011`,
  },
  {
    id: 5,
    input: {
      n: 23,
      associations: [
        "0000000001 65",
        "0000000100 98",
        "0000000111 103",
        "0000001101 110",
        "0000000000 32",
        "0000000011 33",
        "0000000110 101",
        "0000001001 107",
        "0000001100 109",
        "0000001111 112",
        "0000000101 100",
        "0000010101 119",
        "0000010001 115",
        "0000010100 118",
        "0000010000 114",
        "0000010011 117",
        "0000010110 121",
        "0000010010 116",
        "0000000010 97",
        "0000001000 104",
        "0000001011 108",
        "0000001110 111",
        "0000001010 44",
      ],
      s: "00000000010000000000000001010000000001100000010000000001011000000000000000001111000000111000000011100000010000000000000000000100100000000010000000010000000010110000000110000000101000000000000000000010000000110100000101100000010101000000001000000101100000001010000000000000000101100000001110000001001100000100000000000000000000111100000100000000001110000000011100000100000000000010000000110000000000000000010001000000100000000011100000010011000000101100000001010000000000000001010100000011100000010000000000100100000000000000000011",
    },
    output: "A very poor table, anyway, your program should work !",
  },
  {
    id: 6,
    input: {
      n: 0,
      associations: [],
      s: "01111100001010000001011010000011111100000011111011100101010000010100",
    },
    output: "DECODE FAIL AT INDEX 0",
  },
  {
    id: 7,
    input: {
      n: 1,
      associations: ["0 122"],
      s: "000000000000000",
    },
    output: "zzzzzzzzzzzzzzz",
  },
  {
    id: 8,
    input: {
      n: 6,
      associations: [
        "1 32",
        "001 67",
        "0100 85",
        "000 72",
        "0101 10",
        "011 79",
      ],
      s: "00100100100110001100010110110110111010011010010010010010011000110000101001111100011000101111011101001101001001111100011000010100111110000000000001011110111010011010010011111000000000000010100111110001100010111101110100110100100111110001100001010010010010011000110001011011011011101000100010001001001001001001100011000",
    },
    output: `CCCC H  H OOOO U  U CCCC H  H
C    H  H O  O U  U C    H  H
C    HHHH O  O U  U C    HHHH
C    H  H O  O U  U C    H  H
CCCC H  H OOOO UUUU CCCC H  H`,
  },
  {
    id: 9,
    input: {
      n: 5,
      associations: ["00 32", "111 10", "110 92", "10 124", "01 47"],
      s: "011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110011110110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100111101100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001111011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110011110110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100111101100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001111011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110011110110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100111101100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001111011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110011110110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100111101100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001111011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110011110110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100111101100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001111011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110011110110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001000011010110000001100111101100100001101011000000110010000110101100000011001000011010110000001100100001101011000000110010000110101100000011001",
    },
    output: `/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/
/|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/  \\|\\  /|/`,
  },
];

const failureCases = [
  {
    id: 0,
    input: {
      n: 128,
      associations: ["1 97", "001 98", "000 114", "011 99", "010 100"],
      s: "10010001011101010010001",
    },
    error: ErrorEnum.OUT_OF_RANGE_N,
  },
  {
    id: 1,
    input: {
      n: 5,
      associations: ["1 97", "001 98", "000 114", "011 99"],
      s: "10010001011101010010001",
    },
    error: ErrorEnum.INVALID_ASSOCIATIONS,
  },
  {
    id: 1,
    input: {
      n: 5,
      associations: ["1 97", "001 98", "000 114", "011 99", "010 128"],
      s: "10010001011101010010001",
    },
    error: ErrorEnum.INVALID_ASSOCIATIONS,
  },
];

describe("test challenge 032", () => {
  it.each(successCases)("success case $id", ({ input, output }) => {
    const { n, associations, s } = input;

    expect(solution(n, associations, s)).toBe(output);
  });

  it.each(failureCases)("failure case $id", ({ input, error }) => {
    const { n, associations, s } = input;

    expect(() => solution(n, associations, s)).toThrow(error);
  });
});
